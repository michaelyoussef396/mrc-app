{
  "meta": {
    "project": "MRC Lead Management System",
    "date": "2025-11-19",
    "prepared_by": "Generated by Software Development Manager"
  },
  "product_overview": "The MRC Lead Management System is a mobile-first SaaS platform designed for Mould & Restoration Co. in Melbourne, Australia. It fully automates the lead-to-inspection workflow by integrating offline-capable mobile inspection forms, AI-generated inspection summaries, automated PDF report generation, smart email automation, and a customer self-service booking calendar, ensuring data integrity, speed, and professional communication aligned with Australian business standards.",
  "core_goals": [
    "Automate lead capture, inspection scheduling, reporting, and customer booking workflows to significantly reduce manual effort and errors.",
    "Provide a robust offline-capable mobile inspection form with auto-save and photo upload to support field technicians in low connectivity environments.",
    "Enable fast and professional PDF report generation with AI-generated summaries and an approval workflow.",
    "Implement comprehensive email automation to enhance customer communication and lead nurturing.",
    "Deliver a customer-friendly self-service booking calendar with intelligent travel time calculations and conflict prevention.",
    "Ensure compliance with Australian formatting, currency, phone number, and business standards for professional client interactions.",
    "Optimize the platform for mobile experiences with a focus on usability, speed, and data integrity."
  ],
  "key_features": [
    "Lead Capture & Management via website form and HiPages integration with 12-stage pipeline and real-time Kanban board.",
    "Mobile-first, offline-capable inspection form system featuring auto-save, photo uploads, and AI-assisted summary generation.",
    "Automated PDF report generation from dynamic HTML templates with multi-versioning and technician approval workflow.",
    "Customer self-booking calendar with multi-day job support, travel time intelligence, and booking conflict prevention.",
    "Email Automation using Resend API with 8 templated emails across lead and job lifecycle stages.",
    "Dashboard and analytics providing real-time pipeline overview, notifications, and revenue tracking.",
    "Settings management to configure pricing, company profile, equipment rates, and notifications.",
    "Progressive Web App delivering offline support and touch-friendly UI optimized for field technicians."
  ],
  "user_flow_summary": [
    "Customer submits inspection request via public website form with validation and instant email response triggering lead creation.",
    "Admin and HiPages integration populate lead pipeline; leads managed in 12-stage Kanban board with drag-and-drop and stage-specific actions.",
    "Admin or technician schedules inspection; confirmation and reminder emails automatically sent; inspection appears in calendar.",
    "Technician performs inspection using mobile-friendly offline-capable form, capturing environmental data, photos, and completing AI-assisted summary.",
    "Technician submits form triggering automated PDF generation; previews, edits, regenerates, and approves PDF for customer delivery.",
    "Customer receives PDF report email with booking link directing to self-service calendar integrating travel time and availability validation.",
    "Customer books remediation job selecting consecutive days calendar slots; booking updates lead status and notifies technician.",
    "Pipeline reflects updated lead status with full activity timeline and notifications enhancing office admin visibility and coordination."
  ],
  "validation_criteria": [
    "Lead capture forms save data correctly into database, perform validations, and trigger lead response emails reliably.",
    "Pipeline stages display accurately with functional drag-and-drop and correct lead counts per stage.",
    "Inspection form supports offline operation, auto-saves every 30 seconds, handles photos uploads, and AI summary generation functions as intended.",
    "PDF reports generated match templates with all dynamic content, photos, pricing, and toggles correctly rendered and stored in Supabase Storage.",
    "PDF approval workflow allows editing summaries, regenerating, approving PDFs, locks files post-approval, and sends emails with attachments.",
    "Email automation sends all 8 defined email types with correct variables, deliverability verified, and no emails marked as spam.",
    "Customer self-booking calendar prevents scheduling conflicts, respects travel time rules, supports multi-day jobs and triggers confirmation and reminder emails.",
    "Mobile experience tested on iOS and Android devices to ensure sub-3 second load times, large touch targets, and usable offline form submissions.",
    "Compliance with Australian standards for phone, postcode, currency formatting, date-time, and ABN formatting confirmed.",
    "Demo environment loaded with sample data demonstrates end-to-end functionality and meets performance benchmarks without errors."
  ],
  "code_summary": {
    "projectName": "MRC Lead Management System",
    "projectDescription": "A mobile-first SaaS platform for Mould & Restoration Co. that automates the complete lead-to-inspection workflow with offline-capable mobile inspection forms, AI-generated inspection summaries, automated PDF report generation, smart email automation, and customer self-service booking.",
    "techStack": {
      "frontend": {
        "framework": "React 18.3.1",
        "language": "TypeScript 5.8.3",
        "buildTool": "Vite 5.4.19",
        "uiLibrary": "shadcn/ui (Radix UI components)",
        "styling": "Tailwind CSS 3.4.17",
        "stateManagement": "@tanstack/react-query 5.83.0",
        "routing": "react-router-dom 6.30.1",
        "forms": "react-hook-form 7.61.1",
        "validation": "zod 3.25.76",
        "dateHandling": "date-fns 3.6.0",
        "notifications": "sonner 1.7.4"
      },
      "backend": {
        "database": "Supabase (PostgreSQL)",
        "authentication": "Supabase Auth (@supabase/supabase-js 2.76.1)",
        "storage": "Supabase Storage",
        "realtime": "Supabase Realtime",
        "edgeFunctions": "Supabase Edge Functions"
      },
      "devServer": {
        "port": 8080,
        "host": "::"
      }
    },
    "keyFeatures": [
      {
        "name": "Lead Capture & Management",
        "description": "Website form for lead capture with HiPages integration, automated email responses, and 12-stage pipeline management",
        "routes": [
          "/request-inspection",
          "/leads",
          "/lead/:id"
        ]
      },
      {
        "name": "Inspection Form System",
        "description": "Mobile-first, offline-capable inspection forms with auto-save, photo upload, and AI-generated summaries",
        "routes": [
          "/inspection-select-lead",
          "/inspection/new",
          "/inspection/:id"
        ]
      },
      {
        "name": "PDF Report Generation",
        "description": "Automated PDF generation from HTML templates with approval workflow and email delivery",
        "routes": [
          "/reports"
        ]
      },
      {
        "name": "Customer Self-Booking Calendar",
        "description": "Customer-facing calendar with travel time intelligence, conflict prevention, and multi-day job support",
        "routes": [
          "/calendar",
          "/customer-booking"
        ]
      },
      {
        "name": "Email Automation",
        "description": "8 automated email templates (new lead response, booking confirmations, reminders, reports) using Resend API",
        "routes": []
      },
      {
        "name": "Dashboard & Analytics",
        "description": "Real-time dashboard with pipeline overview, revenue tracking, recent activity, and notifications",
        "routes": [
          "/dashboard",
          "/analytics"
        ]
      },
      {
        "name": "Settings Management",
        "description": "Editable pricing configuration, company profile, equipment/materials, operating hours, and notifications",
        "routes": [
          "/settings"
        ]
      },
      {
        "name": "Mobile PWA",
        "description": "Progressive Web App with offline support, mobile-optimized UI, and touch-friendly interfaces",
        "routes": []
      }
    ],
    "businessContext": {
      "industry": "Mould Remediation & Restoration",
      "location": "Melbourne, Australia",
      "users": [
        "Field Technicians (Clayton & Glen)",
        "Office Admin",
        "Customers"
      ],
      "mobileFirst": true,
      "offlineSupport": true,
      "australianStandards": {
        "currency": "$X,XXX.XX (comma separators)",
        "phone": "(03) XXXX XXXX or 04XX XXX XXX",
        "date": "DD/MM/YYYY",
        "timezone": "Australia/Melbourne",
        "spelling": "Australian English",
        "ABN": "XX XXX XXX XXX"
      }
    },
    "criticalRequirements": {
      "performance": {
        "mobileLoadTime": "<3 seconds on 4G",
        "touchTargets": "≥48px for glove use",
        "offlineMode": "Works in basements without signal",
        "autoSave": "Every 30 seconds to localStorage"
      },
      "dataIntegrity": {
        "zeroDataLoss": true,
        "autoSave": true,
        "offlineQueue": true,
        "validation": "Zod schema validation"
      },
      "pricing": {
        "discountCap": "13% maximum (0.87 multiplier minimum)",
        "GST": "10% on subtotal",
        "multiDayDiscount": "0% (≤8h), 7.5% (9-16h), 13% (17+h)"
      }
    },
    "sprintScope": "Sprint 1 - Production Demo Ready",
    "outOfScope": [
      "Job completion workflow",
      "Invoicing & payments",
      "Google review system",
      "Advanced analytics",
      "Native mobile apps",
      "Third-party integrations (Xero, SMS)"
    ]
  }
}
